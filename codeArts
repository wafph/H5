易港通电商项目研发流程方案
目录
目录
1	引言	1
1.1	1.1项目背景	1
1.2	1.2目的	1
2	研发管理流程	2
2.1	研发流程图	2
2.2	研发流程表格	2
2.3	研发活动概述：	4
2.3.1	软件子项目启动	4
2.3.2	Story/Task划分	7
2.3.3	制定迭代计划	8
2.3.4	启动迭代计划	9
2.3.5	编码	9
2.3.6	单元测试	9
2.3.7	提交代码仓	9
2.3.8	开发流水线定义	9
2.3.9	开发流水线代码检查门禁	11
2.3.10	开发流水线构建	13
2.3.11	TestOne自动化测试	13
2.3.12	开源治理	14
2.3.13	漏洞扫描	14
2.3.14	代码Review	15
2.3.15	测试用例测试设计	15
2.3.16	持续集成搭建	15
2.3.17	集成环境准备	16
2.3.18	研发平台代码检查	16
2.3.19	持续集成部署构建	18
2.3.20	持续集成制品仓	21
2.3.21	持续集成部署管理	22
2.3.22	发布测试环境	24
2.3.23	迭代测试	24
2.3.24	可视化管理	24
2.3.25	迭代评估	25
2.3.26	发布预生产环境	25
2.3.27	预生产环境测试	25
2.3.28	提需求上线单	25
2.3.29	上线评审	26
2.3.30	发布上线	26

1	引言
1.1	1.1项目背景
随着易港通电商平台的不断发展，平台的业务模式、范围越发丰富，与之对应的平台系统规模也进一步扩大，系统研发工作量、研发管理难度与日俱增。在此趋势下，原有较为粗放的研发管理模式已经不足以支撑平台系统快速发展的需求。因此，引入一套一站式标准化的研发安全管控系统来承载数字化研发管理体系势在必行。通过研发作业规范化、数字化、自动化等手段，实现产品经理、开发、测试等不同角色使用同一系统协同软件开发，并将质量与安全的管理流程融入到工具系统中，建立从代码开发到发布流程集中管控能力。以支撑未来易港通更安全、更稳定、更高效软件研发流程，以满足平台业务快速发展的需求。

1.2	1.2目的
本项目的目标是将易港通电商平台项目使用易港通的研发平台 (CodeArts)上重新定义一套更安全、更稳定、更高效率的软件研发流程，以实现高效、可持续的软件开发和生产流程。通过将软件开发过程数据资产统一整合至易港通的研发平台，通过本项目的实施，将为团队带来更高效、更可持续的软件开发和生产流程，提升整体项目管理水平，促进技术创新与团队协作，实现项目目标的更加稳定和可靠的实现
2	研发管理流程
2.1	研发流程图
 
2.2	研发流程表格
编号	研发活动	研发活动描述	参与人	工具模块
001	软件子项目启动	项目启动，明确项目人员、项目目标、项目周期，并在研发平台创建项目，并录入产品经理、开发负责人、开发人员、测试人员、业务部门人员。
迭代启动，开发负责人明确迭代等计划。	业务部门、开发负责人	研发平台项目
002	Story/Task划分	基于Scrum项目模型拆分Story和Task，并录入到研发平台需求模块，并明确各Task的责任人。	业务部门、开发负责人、开发人员	研发平台需求模块
003	制定迭代计划	基于Scrum项目模型明确迭代计划，并明确需求的迭代交付计划，并在研发平台上创建迭代计划，并把对应的TasK设置上对应的迭代计划。	开发负责人、开发人员	研发平台需求模块

004	启动迭代	开始启动开发工作	业务部门、开发负责人、开发人员	研发平台需求模块

005	编码	开发人员基于需求开发代码	开发人员	保持原有环境
006	单元测试	开发人员基于需求开发对应的单元测试用例	开发人员	保持原有环境
007	提交代码仓	开发人员提交代码仓，提交代码的描述信息需要带上本次TaskId	开发人员	保持原有环境
008	开发流水线	开发负责人定义开发流水线阶段，包括代码检查、编译构建检查、自动化测试检查、开源质量检查，保证上库代码是满足基本质量要求。	开发负责人、开发人员	流水线
009	代码检查阶段	提交代码后，先触发代码检查流水线，基于扫描结果修改代码重新提交，直到满足门禁要求。	开发人员	流水线，
代码检查

010	研发平台构建	提交代码后，触发流水线构建，检查代码是否能构建成功，满足流水线构建要求。	开发人员	流水线，构建
011	TestOne自动化测试	提交代码后，触发流水线自动化测试，检查本次提交是否满足自动化测试通过率，建立代码治理看护体系，并把研发平台中把任务状态修改成测试，并转给测试人员。	开发人员	流水线，
TestOne
012	研发平台开源治理	提交代码后，触发开源治理扫描，检查引用的开源是否有漏洞问题，并提供修改建议。	开发人员	流水线
开源治理
013	开发流水线	开发负责人定义开发流水线阶段，包括代码检查、编译构建检查、自动化测试检查、开源质量检查，保证上库代码是满足基本质量要求。	开发负责人、开发人员	流水线
014	代码Review	开发人员提交代码合并请求，开发负责人进行代码Review，并查看流水线的执行结果，符合要求，开发负责人负责合并代码。	开发负责人、开发人员	流水线
015	测试用例设计与实现	业务部门（测试人员）基于提出需求进行测试用例设计和执行。	业务部门（测试人员）	TestOne
016	持续集成搭建	集成人员进行持续集成流水线搭建	发布人员	研发平台
017	集成环境准备	发布人员准备测试环境、预生产环境、生产环境等机器，并预装好环境	发布人员	无
018	研发平台代码检查	发布人员在迭代转测阶段出包，并执行代码检查扫描	发布人员	代码扫描
019	研发平台构建	发布人员在迭代转测阶段出包，并执行构建，检查构建问题	发布人员	构建
020	研发平台制品仓	发布人员在代转测阶段出包，并把构建输出包通过流水线自动发布到制品仓，并形成唯一的版本号。	发布人员	制品仓
021	研发平台部署	发布人员在转测阶段出包，从制品仓自动拿发布包，通过部署模块发布到指定的环境	发布人员	部署
022	发布测试环境	发布人员通过流水线定义好测试环境发布流水线，并执行。	发布人员	流水线
023	迭代测试
TestOne	业务部门（测试人员）在测试环境进行测试，并使用TestOne进行单元测试，并把对应的需求修改成待上线状态	业务部门（测试人员）	TestOne
024	可视化管理	整个迭代过程都可以通过研发平台的需求管理进行管理，可以看到需求的状态。	开发负责人	研发平台需求模块
025	迭代评估	开发负责人和业务部门基于业务情况和流水线结果，判断当前迭代是否满足上线要求，并进行评估。	开发负责人、业务部门	研发平台需求模块
026	发布预生产环境	发布人员通过流水线定义好预生产发布流水线，并执行。	发布人员	流水线
027	预生产测试	业务测试人员在预生产环境进行回归测试。	业务部门（测试人员）	
028	提需求上线单	业务部门基于研发平台，筛选处本轮迭代待上线的需求，提交申请	业务部门、开发负责人	研发平台
029	评审	开发负责人基于业务实质评审上线需求，评估结果	业务部门、开发负责人	
030	上线生产环境	发布人员通过流水线定义好生产发布流水线，并执行。	发布人员	流水线
2.3	研发活动概述：
2.3.1	软件子项目启动
	编号：001
	研发活动描述
	项目启动：
	开发负责人负责项目人员、项目目标、项目周期，并在研发平台创建项目，并录入产品经理、开发负责人、开发人员、测试人员、业务部门人员。
 
 
 

在“添加成员”界面选择需要添加的成员，选择“下一步”。 
为每个添加的成员，选择合适的角色，点击“保存”。
 
	业务部门负责在研发平台项目录入原始需求。
 
	日常迭代：
	项目负责人创建一个新迭代。
 
	业务部门负责在研发平台A录入原始需求。
 
	参与人：开发负责人、业务部门。
	涉及工具模块：研发平台
2.3.2	Story/Task划分
	编号：002
	研发活动描述
	开发负责人和业务部门一起基于Scrum项目模型拆分Story和Task，开发负责人负责把拆分好的Story、Task录入到研发平台，并设置设置具体的责任人。
 
	开发人员负责接受对应的任务，并随时对齐。
	参与人：开发负责人、业务部门、开发人员。
	涉及工具模块：研发平台
2.3.3	制定迭代计划
	编号：003
	研发活动描述
	开发负责人制定迭代计划，在研发平台上创建迭代计划，并把对应的Task设置上对应的迭代计划。
 

	开发人员基于任务安排，在研发平台上把对应的任务设置迭代计划。
 
	参与人：开发负责人、开发人员。
	涉及工具模块：研发平台

2.3.4	启动迭代计划
	编号：004
	研发活动描述
	开发人员启动开发工作。
	参与人：开发人员。
	涉及工具模块：无
2.3.5	编码
	编号：005
	研发活动描述
	开发人员启动编码工作，从研发平台需求模块查看需求
	参与人：开发人员。
	涉及工具模块：研发平台
2.3.6	单元测试
	编号：006
	研发活动描述
	开发人员基于需求开发对应的单元测试用例，从研发平台需求模块查看需求。
	参与人：开发人员。
	涉及工具模块：研发平台

2.3.7	提交代码仓
	编号：007
	研发活动描述
	开发人员提交代码到对应分支，并创建对应提交请求。
	参与人：开发人员。
	涉及工具模块：原代码仓
2.3.8	开发流水线定义
	编号：008
	研发活动描述：
	开发负责人定义开发流水线规则阶段，确定提交代码要经过编译构建、代码检查、自动化测试来进行开发流水线定义开发人员负责创建流水线并负责落地
 

	开发负责人负责定义代码检查规则集和拦截规则
 
 
 

	开发人员负责搭建部署。
 
	开发人员负责搭建自动化测试
	参与人：开发负责人、开发人员
	涉及工具模块：研发平台流水线、研发平台构建、研发平台部署
2.3.9	开发流水线代码检查门禁
	编号：009
	研发活动描述
	开发流水线代码检查门禁初始化
	开发负责人定义好扫描的规则集，定义好门禁拦截规则，基于项目要求不能出现严重以上问题，一般和提示问题不能超过5个，具体拦截规则基于开发负责人综合考虑。
 
 

	开发流水线代码检查门禁刷新
	开发负责人基于实际开发现状、代码问题、安全问题等刷新门禁代码检查规则集、代码检查门禁拦截规则。
 

	开发人员提交代码到对应分支，触发流水线代码检查门禁。
 
 
	参与人：开发人员。
	涉及工具模块：研发平台流水线、研发平台代码检查
2.3.10	开发流水线构建
	编号：010
	研发活动描述
	开发人员提交代码到对应分支，并触发流水线构建。
 
	参与人：开发人员。
	涉及工具模块：研发平台流水线、研发平台构建
2.3.11	TestOne自动化测试
	编号：011
	研发活动描述
	开发人员提交代码到对应分支，并创建对应提交请求，触发流水线自动化测试阶段，并基于测试结果，修改代码，保证自动化测试能够通过。
 
	参与人：开发人员。
	涉及工具模块：研发平台流水线、自动化测试工具
2.3.12	开源治理
	编号：012
	研发活动描述：
	业务部门（测试人员）在构建出包后，通过开源服务对软件包进行二进制已知漏洞扫描，并保证扫描出的告警清零。
 
	参与人：业务部门（测试人员）
	涉及工具模块： 研发平台开源治理
2.3.13	漏洞扫描
	编号：013
	研发活动描述：
	业务部门（测试人员）在构建出包后，通过漏洞服务对部署后的Web应用网站进行已知漏洞扫描，并保证扫描出的告警清零。
 
	参与人：业务部门（测试人员）
	涉及工具模块： 研发平台漏洞扫描
2.3.14	代码Review
	编号：014
	研发活动描述：
	开发人员提交代码合并请求，并保证流水线执行是通过的。
	开发负责人进行代码Review，检查代码是否符合标准，不符合提出检视意见，帮助提升代码质量。
	参与人：开发人员、开发负责人。
涉及工具模块：代码仓、流水线
2.3.15	测试用例测试设计
	编号：015
	研发活动描述：
	业务部门（测试人员）进行需求分析，确定本次的测试类型，如功能测试、性能测试、安全测试、兼容性测试，识别测试条件，确定测试的输入和输出，基于测试条件设计测试用例，并录入到TestOne平台上进行测试管理。
	参与人：业务部门（测试人员）。
涉及工具模块：TestOne
2.3.16	持续集成搭建
	编号：016
	研发活动描述：
	集成人员进行持续集成流水线搭建
	集成人员进行集成环境搭建。
	集成人员进行代码检查任务搭建。
	集成人员进行代码构建任务搭建。
	集成人员进行代码制品仓任务搭建。
	集成人员进行部署任务搭建。
	集成人员进行发布测试环境搭建。
	集成人员进行发布预生产环境搭建。
	集成人员进行发布生产环境搭建。
	参与人：集成人员
涉及工具模块：研发平台
2.3.17	集成环境准备
	编号：017
	研发活动描述：
	集成人员进行持续集成搭建，准备对应规格的机器，安装必要的软件和依赖，比如Java环境，因为Jenkins从2.357及LTS 2.361.1之后的版本要求Java 11或者17。
	参与人：集成人员
涉及工具模块：研发平台流水线
2.3.18	研发平台代码检查
	编号：018
	研发活动描述：
	集成流水线代码检查门禁初始化
	开发负责人定义好扫描的规则集，定义好门禁拦截规则，基于项目要求不能出现严重以上问题，一般和提示问题不能超过5个，具体拦截规则基于开发负责人综合考虑。
 
 

	集成流水线代码检查门禁刷新
	开发负责人基于实际开发现状、代码问题、安全问题等刷新门禁代码检查规则集、代码检查门禁拦截规则。
 

	集成人员触发发布流水线触发代码检查门禁。
 
 
	参与人：集成人员、开发负责人。
	涉及工具模块：研发平台流水线、研发平台代码检查
2.3.19	持续集成部署构建
	编号：019
	研发活动描述
	集成人员配置构建任务，并定义好构建任务。
	集成人员在项目页面，“持续交付”菜单下，点击“编译构建菜单”，在“编译构建“页面中，点击“新建任务”按钮，在“新建构建任务”界面，填写“任务名称”，选择需要构建的“源码仓库”和“分支“，这里我们选择了一个JAVA后端代码库易港通电商。
钮。 
在“推荐模版”中，选择“Maven”，点击“下一步”按钮。
 
在“创建步骤“页签，点击“构建环境配置”节点，选择“构建环境主机类型”为X86服务器。“执行机高级设置”组中的“执行主机”选择“内置执行机”。
 
在“创建步骤“页签，点击“代码下载配置”节点，选择“使用指定代码仓库Tag或CommitID构建”为“不指定”。
 
在“创建步骤“页签，点击“Maven构建”节点，选择“工具版本”为“maven3.5.3-jdk8-open”；命令输入框中，根据项目情况更新为对应的maven命令。
在“创建步骤“页签，点击“上传软件包到软件发布库”节点，一般情况下“构建包路径”不需要调整；“发布版本号”输入框留空，系统会自动创建版本号，格式为“YYYYMMDD-BuildNo”。
 

	参与人：发布人员。
	涉及工具模块：研发平台流水线、研发平台构建
2.3.20	持续集成制品仓
	编号：020
	研发活动描述：
	集成人员在部署完成后，配置研发平台部署组件，把部署的结构件发布到制品仓里面，统一进行版本管理
 
 
。
	参与人：集成人员
涉及工具模块：研发平台流水线、研发平台制品仓发布库
2.3.21	持续集成部署管理
	编号：021
	研发活动描述：
	集成人员基于研发平台流水线、部署功能，把制品仓发布包部署到测试环境、预生产环境、生产环境。
 
	集成人员初始化发布环境
 
在“资源列表”页签中，点击“导入主机”按钮。 
初始化环境
 
	发布人员定义部署任务，把制品仓版本发布到环境指定的位置上。

接下来，我们切换到“部署步骤”页签。
我们先分析下，我们部署到步骤是怎样的。
1.	拿到编译好的制品
2.	将制品复制到要部署到目标主机上，复制到临时目录中
3.	停止Docker，让老版程序运行
4.	覆盖文件让程序更新为新版
5.	启动Docker，让新版程序运行
6.	清理，将部署过程中临时解压缩的目录清理

	参与人：集成人员
涉及工具模块：研发平台流水线、研发平台制品仓发布库、研发平台部署库
2.3.22	发布测试环境 
	编号：022
	研发活动描述：
	集成人员执行测试环境发布部署流水线，部署代码包到测试环境上，满足测试人员和开发人员进行测试。
 
	参与人：集成人员
涉及工具模块：研发平台流水线

2.3.23	迭代测试 
	编号：023
	研发活动描述：
	业务部门（测试人员）在测试环境进行自动化测试验证，保证测试能够通过，发现问题，提问题单，
	开发人员针对问题进行修复，自验证后，重新提交代码。
	开发负责人评审代码，合并代码。
	发布人员重新执行流水线，刷新测试环境。
	业务部门（测试人员）重新进行测试，直到问题修复。
	参与人：开发负责人、业务部门（测试人员）、开发人员、发布人员
	涉及工具模块：研发平台，TestOne

2.3.24	可视化管理
	编号：024
	研发活动描述：
	开发负责人通过在研发平台可视化研发活动，及时掌握项目的交付情况。
	参与人：开发负责人
	涉及工具模块：研发平台
2.3.25	迭代评估
	编号：025
	研发活动描述：
	开发负责人召集开发人员、业务部门对本轮迭代进行一个评估，决策是否发布到预生产环境。
	参与人：开发负责人、开发人员、业务部门
	涉及工具模块：研发平台
2.3.26	发布预生产环境
	编号：026
	研发活动描述：
	集成人员执行预生产环境发布部署流水线，部署代码包到预生产环境上。
 
	参与人：集成人员
涉及工具模块：研发平台流水线

2.3.27	预生产环境测试
	编号：027
	研发活动描述：
	业务部门（测试人员）在预生产环境进行灰度测试。
	参与人：业务部门（测试人员）
涉及工具模块：无 

2.3.28	提需求上线单
	编号：028
	研发活动描述：
	业务部门提交本轮迭代上线的需求列表。
	参与人：业务部门
涉及工具模块：无 
2.3.29	上线评审
	编号：029
	研发活动描述：
	开发负责人评审上线需求列表，并输出评审结果。
	参与人：业务部门
涉及工具模块：无 

2.3.30	发布上线
	编号：030
	研发活动描述：
	发布人员发布人员通过流水线定义好生产发布流水线，并执行。
	参与人：发布人员
涉及工具模块：无 

